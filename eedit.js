class eEditor{constructor(t,e){this.theme=e.theme,this.parent=t,this.data=e,this.t=document.createElement("textarea"),this.p=document.createElement("pre"),this.t.ariaHidden="true",this.onins=[],this.lines=!1;let s=this.onins,i=this.p;this.language;let l=this.syncscroll,n=()=>this.data.lines,a=()=>this.data.language;this.t.addEventListener("input",function(){l(i,this);let t=this.value;s.forEach(e=>{e(t)}),!1==n()?i.innerHTML=Prism.highlight(t,Prism.languages[a()]):(i.innerHTML=Prism.highlight(t,Prism.languages[a()]),i.innerHTML=i.innerHTML.split("\n").map(t=>`<span class="ln">${t}</span>`).join("\n"))}),this.t.addEventListener("scroll",function(){l(i,this)}),this.basecss(this.data)}setLanguage(t){this.data.language="l"}toggleLines(){this.data.lines=!this.data.lines,this.t.dispatchEvent(new Event("input"))}syncscroll(t,e){let s=t;s.scrollTop=e.scrollTop,s.scrollLeft=e.scrollLeft}getlang(){return this.language}basecss(t){this.linestyle=document.createElement("style"),this.linestyle.id="eeditstyle-"+Math.random().toString(36).substring(2),this.linestyle.innerHTML=ee.lnThemes.default,document.head.appendChild(this.linestyle),this.p.style.width=t.size.w,this.p.style.height=t.size.h,this.t.style.width=t.size.w,this.t.style.height=t.size.h,this.t.setAttribute("spellcheck","false");let e=t.theme,s=e.syntax,i=document.createElement("style");for(let l of Object.entries(s))i.innerHTML+=`.token.${l[0]}{color:${l[1]} !important;}
`;document.head.appendChild(i),this.overlay(this.t),this.overlay(this.p)}overlay(t){t.style.top=this.data.position.y,t.style.left=this.data.position.x,t.style.overflow="auto",t.style.position="absolute",t.style.fontFamily=this.theme.font.family,t.style.fontSize=this.theme.font.size,t.style.margin=0,t.style.padding=this.data.pad,t.style.paddingLeft=this.data.offset,t.style.lineHeight=this.theme.lines?.height?this.theme.lines?.height:"1.5em",t.style.whiteSpace="pre-wrap",this.textarea(this.t),this.pre(this.p)}_theme(t,e){e.style.fontFamily=t.font.family,e.style.fontSize=t.font.size,e.style.margin=0,e.style.lineHeight=t.lines?.height?this.theme.lines?.height:"1.5em"}Theme(t){this._theme(t,this.t),this._theme(t,this.p),this.t.style.caretColor=t.caret.color,this.p.style.color=t.colors.text,this.p.style.backgroundColor=t.colors.background}create(){this.parent.appendChild(this.t),this.parent.appendChild(this.p)}textarea(t){t.style.border="none",t.style.resize="none",t.style.background="transparent",t.style.zIndex="1",t.style.color="rgba(0, 0, 0, 0);",t.style.caretColor=this.theme.caret.color,t.style.outline="none",t.style.color="transparent"}pre(t){t.style.zIndex="0",t.style.color=this.theme.colors.text,t.style.backgroundColor=this.theme.colors.background}}const ee={Themes:{cool:{font:{family:"monospace",size:"18px"},caret:{color:"darkgrey"},colors:{text:"white",background:"#2B065A"},syntax:{}},matrix:{font:{family:"monospace",size:"18px"},caret:{color:"green"},colors:{text:"yellow",background:"black"},syntax:{}}},lnThemes:{default:"pre {counter-reset: line;}span.ln {counter-increment: line;}span.ln::after {z-index: 55;position: absolute;right: 3%;content: counter(line);font-size: 14px;color: grey;-webkit-user-select: none;}"}};
